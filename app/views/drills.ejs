<div class="h-full">
  <div class="flex justify-center items-center mb-4">
    <h1 class="text-xl font-bold text-center">Drills</h1>
    <% if (locals.currentUser && locals.currentUser.admin) { %>
      <a href="/drills/create" class="bg-blue-600 text-white rounded px-4 py-2 ml-2 whitespace-nowrap font-semibold text-sm">Create</a>
    <% } %>
  </div>
  <ul class="space-y-3 pb-4">
    <% if (drills && drills.length) { %>
      <% drills.forEach(drill => { %>
        <li class="bg-white rounded-lg shadow p-4">
          <div class="flex items-start">
            <div class="flex flex-col">
              <div class="flex items-center space-x-2">
                <span class="flex items-center font-bold text-lg text-[#FFC000]">
                  <span>
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#FFC000" height="36px" width="28px" version="1.1" id="Layer_1" viewBox="4 12 62 36" xml:space="preserve">
                      <path d="M50.3,16.2h0.5c0.1-3.7,0.7-7.4,1.9-11l0.3-1c0.1-0.4,0.5-0.6,0.9-0.6c0.4,0,0.8,0.3,0.9,0.6l0.3,1c1.2,3.6,1.8,7.3,1.9,11  h0.5v6.3l1.5,4v23.3H48.8V26.4l1.5-4L50.3,16.2L50.3,16.2z"/>
                      <path d="M59,50.6H48.8V52H59L59,50.6L59,50.6z"/>
                      <path d="M38.5,16.2H39c0.1-3.7,0.7-7.4,1.9-11l0.3-1c0.1-0.4,0.5-0.6,0.9-0.6c0.4,0,0.8,0.3,0.9,0.6l0.3,1c1.2,3.6,1.8,7.3,1.9,11  h0.5v6.3l1.5,4v23.3H36.9V26.4l1.5-4L38.5,16.2L38.5,16.2z"/>
                      <path d="M47.2,50.6H36.9V52h10.2V50.6z"/>
                      <path d="M26.2,16.2h0.5c0.1-3.7,0.7-7.4,1.9-11l0.3-1c0.1-0.4,0.5-0.6,0.9-0.6c0.4,0,0.8,0.3,0.9,0.6l0.3,1c1.2,3.6,1.8,7.3,1.9,11  h0.5v6.3l1.5,4v23.3H24.7V26.4l1.5-4L26.2,16.2L26.2,16.2z"/>
                      <path d="M34.9,50.6H24.7V52h10.2V50.6z"/>
                      <path d="M14.3,16.2h0.5c0.1-3.7,0.7-7.4,1.9-11l0.3-1c0.1-0.4,0.5-0.6,0.9-0.6s0.8,0.3,0.9,0.6l0.3,1c1.2,3.6,1.8,7.3,1.9,11h0.5  v6.3l1.5,4v23.3H12.7V26.4l1.5-4L14.3,16.2L14.3,16.2z"/>
                      <path d="M23,50.6H12.7V52H23C23,52,23,50.6,23,50.6z"/>
                    </svg>
                  </span>
                  <%= drill.ammo %>
                </span>
                <span
                  id="name-<%= drill.id %>"
                  class="font-semibold line-clamp-2 cursor-pointer"
                  onclick="const nameEl = document.getElementById('name-<%= drill.id %>'); nameEl.classList.toggle('line-clamp-2');"
                ><%= drill.name %></span>
              </div>
              <% if (drill.description) { %>
                <span
                  id="desc-<%= drill.id %>"
                  class="text-gray-500 text-sm line-clamp-2 cursor-pointer"
                  onclick="const descEl = document.getElementById('desc-<%= drill.id %>'); descEl.classList.toggle('line-clamp-2');"
                ><%= drill.description %></span>
              <% } %>
            </div>
            <a href="/time?drillId=<%= drill.id %>" class="ml-auto" title="Time this drill">
              <svg xmlns="http://www.w3.org/2000/svg" width="40px" height="40px" viewBox="0 0 24 24" fill="none">
                <path d="M12 14V11M12 6C7.85786 6 4.5 9.35786 4.5 13.5C4.5 17.6421 7.85786 21 12 21C16.1421 21 19.5 17.6421 19.5 13.5C19.5 11.5561 18.7605 9.78494 17.5474 8.4525M12 6C14.1982 6 16.1756 6.94572 17.5474 8.4525M12 6V3M19.5 6.5L17.5474 8.4525M12 3H9M12 3H15" stroke="#06402B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
          </div>
          <div class="flex items-start space-x-2 mt-2">
            <% if (locals.currentUser && locals.currentUser.admin) { %>
              <form method="POST" action="/drills/<%= drill.id %>" onsubmit="return confirm('Delete \'<%= drill.name %>\'?');">
                <input type="hidden" name="_csrf" value="<%= locals._csrfToken %>">
                <input type="hidden" name="_method" value="DELETE">
                <button type="submit" class="bg-red-600 hover:bg-red-700 text-white rounded px-3 py-1 text-xs font-semibold">Delete</button>
              </form>
              <a href="/drills/<%= drill.id %>/edit" class="bg-yellow-500 hover:bg-yellow-600 text-white rounded px-3 py-1 text-xs font-semibold">Edit</a>
            <% } %>
          </div>
        </li>
      <% }) %>
    <% } else { %>
      <li class="text-center text-gray-400">No drills found.</li>
    <% } %>
  </ul>
</div>
